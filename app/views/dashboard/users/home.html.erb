<h1 class="mb-5">Welcome <%= current_user.first_name %></h1>

<div data-controller="new-pet">
  <button class="btn btn-primary mb-3" data-action="click->new-pet#toggleForm">Add a new pet</button>
  <%# <%= btn "Add a new pet", new_pet_path, class: "btn btn-primary mb-3" %>
  <div class="d-none" data-new-pet-target="form">
  <%= simple_form_for @pet do |f| %>
    <div class="form-inputs"  >
      <%= f.input :name %>
      <%= f.input :price %>
      <%= f.input :species %>
      <%= f.input :description %>
      <%= f.input :photo, as: :file %>
      <%= f.submit "Youpi !", class: "btn btn-primary" %>
    </div>
  <% end %>
  </div>
</div>

<h2>My Pets</h2>
<% if current_user.pets.any? %>
  <div class="d-flex flex-wrap gap-4 m-3 mb-5">
    <% current_user.pets.each do |pet| %>
    <div class="d-flex flex-column border rounded p-2 shadow">
      <%= link_to render(
            partial: "shared/pet", locals: { pet: pet }
          ), pet %>
      <div class="ms-2">
        <%= link_to content_tag(:i, '', class: 'fas fa-edit'), edit_pet_path(pet) %>
        <%= link_to content_tag(:i,'',class: 'fas fa-trash-can'), pet_path(pet),
              data: { turbo_method: :delete, turbo_confirm: "Are you sure?" }
          %>
      </div>
    </div>
    <% end %>
  </div>
<% else %>
  <p>You have no pets yet.</p>
<% end %>

<h2>My Bookings</h2>
<% if current_user.bookings.any? %>
  <div class="d-flex gap-2 mb-3">
    <% @my_bookings.each do |booking| %>
      <%= render partial: "booking", locals: { booking: booking } %>
    <% end %>
  </div>
<% else %>
  <p>You have no bookings yet.</p>
<% end %>

<% if current_user.pets.any? %>
  <% if @my_pet_bookings.any? %>
    <h2>My Pet Bookings</h2>
    <div class="d-flex gap-2 mb-3">
      <% @my_pet_bookings.each do |booking| %>
        <%= render partial: "booking", locals: { booking: booking } %>
      <% end %>
    </div>
  <% else %>
    <p>No one has booked your pets yet.</p>
  <% end %>
<% end %>
